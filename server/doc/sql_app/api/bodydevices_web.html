<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>sql_app.api.bodydevices_web API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>sql_app.api.bodydevices_web</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">from datetime import datetime

from fastapi import Depends, APIRouter, Form
from fastapi import Request
from fastapi.responses import HTMLResponse, RedirectResponse
from fastapi.templating import Jinja2Templates
from fastapi_jwt_auth import AuthJWT
from pydantic import BaseModel
from sqlalchemy.orm import Session
from sql_app.api.auth import fake_users_db
from sql_app import crud, models
from ..database import SessionLocal, engine

models.Base.metadata.create_all(bind=engine)

# Path to html templates used in this file
templates = Jinja2Templates(directory=&#34;../templates/body-devices&#34;)

# prefix used for all endpoints in this file
body_device_web = APIRouter(prefix=&#34;&#34;)


# Dependency
def get_db():
    db = SessionLocal()
    try:
        yield db
    finally:
        db.close()


@body_device_web.get(&#34;/body-devices-web&#34;, response_class=HTMLResponse)
async def read_devices(request: Request, skip: int = 0, limit: int = 100, db: Session = Depends(get_db),
                       Authorize: AuthJWT = Depends()):
    &#34;&#34;&#34;
    Returns template with all body devices and necessary attributes
    &#34;&#34;&#34;
    Authorize.jwt_optional()
    current_user = Authorize.get_jwt_subject()

    device_dict = []
    devices = crud.get_body_devices(db, skip=skip, limit=limit)
    teams = crud.get_teams(db, skip=skip, limit=limit)
    for dev in devices:
        lic = crud.get_license(db, dev.license_id)
        device_dict.append({&#34;device&#34;: dev, &#34;license&#34;: lic, &#34;log&#34;: dev.b_logs[len(dev.b_logs) - 1]})
    licenses = crud.get_licenses(db, skip=skip, limit=limit)
    if current_user == &#34;admin&#34;:
        return templates.TemplateResponse(&#34;body_devices.html&#34;, {&#34;request&#34;: request, &#34;devices&#34;: device_dict,
                                                                &#34;devs&#34;: devices, &#34;teams&#34;: teams, &#34;licenses&#34;: licenses,
                                                                &#34;user&#34;: current_user})
    else:
        current_user = &#34;guest&#34;
        return templates.TemplateResponse(&#34;body_devices_normal.html&#34;, {&#34;request&#34;: request, &#34;devices&#34;: device_dict,
                                                                &#34;devs&#34;: devices, &#34;teams&#34;: teams, &#34;licenses&#34;: licenses,
                                                                &#34;user&#34;: current_user})


@body_device_web.post(&#34;/body-devices-web&#34;, response_class=HTMLResponse)
async def filter_devices(request: Request, skip: int = 0, limit: int = 100,
                         body_id: str = Form(&#34;all&#34;), lic_id: str = Form(&#34;all&#34;), team: str = Form(&#34;all&#34;),
                         db: Session = Depends(get_db), Authorize: AuthJWT = Depends()):
    &#34;&#34;&#34;
    Endpoint used for filtering body devices by user given inputs. returns html template with only
    body devices that has attributes defined by user input
    &#34;&#34;&#34;
    Authorize.jwt_optional()
    current_user = Authorize.get_jwt_subject()
    device_dict = []
    devices_f = crud.get_filtered_bodydevices(db, body_id, lic_id, team)
    ids = []
    for d in devices_f:
        ids.append(d[0])
    devices = crud.get_bodydevices_with_ids(db, ids)
    teams = crud.get_teams(db, skip=skip, limit=limit)
    for dev in devices:
        lic = crud.get_license(db, dev.license_id)
        device_dict.append({&#34;device&#34;: dev, &#34;license&#34;: lic, &#34;log&#34;: dev.b_logs[len(dev.b_logs) - 1]})
    licenses = crud.get_licenses(db, skip=skip, limit=limit)
    if current_user == &#34;admin&#34;:
        return templates.TemplateResponse(&#34;body_devices.html&#34;, {&#34;request&#34;: request, &#34;devices&#34;: device_dict,
                                                                &#34;devs&#34;: devices, &#34;teams&#34;: teams, &#34;licenses&#34;: licenses,
                                                                &#34;user&#34;: current_user})
    else:
        current_user = &#34;guest&#34;
        return templates.TemplateResponse(&#34;body_devices_normal.html&#34;, {&#34;request&#34;: request, &#34;devices&#34;: device_dict,
                                                                       &#34;devs&#34;: devices, &#34;teams&#34;: teams,
                                                                       &#34;licenses&#34;: licenses,
                                                                       &#34;user&#34;: current_user})


@body_device_web.get(&#34;/body-device-license/{device_id}&#34;, response_class=HTMLResponse)
async def connect_dev_lic(request: Request, device_id: int, db: Session = Depends(get_db),
                          Authorize: AuthJWT = Depends()):
    &#34;&#34;&#34;
    Returns template with one body device and all available licenses that can be assigned to it. Plus available teams
    that can be assigned to device, inventory number and comment text input for this device.
    &#34;&#34;&#34;
    Authorize.jwt_optional()
    current_user = Authorize.get_jwt_subject()
    if current_user != &#34;admin&#34;:
        return RedirectResponse(url=f&#34;/logs-web&#34;, status_code=303)
    device = crud.get_body_device(db, device_id)
    licenses = crud.get_licenses(db, 0, 100)
    lic_left = []
    for lic in licenses:
        if lic != device.license:
            lic_left.append(lic)
    teams = crud.get_teams(db, 0, 100)
    return templates.TemplateResponse(&#34;body_device_license.html&#34;,
                                      {&#34;request&#34;: request, &#34;device&#34;: device, &#34;licenses&#34;: lic_left, &#34;teams&#34;: teams})


@body_device_web.post(&#34;/body-devices-web-lic/{device_id}&#34;)
async def connect_post(device_id: int, lic: str = Form(...), db: Session = Depends(get_db),
                       Authorize: AuthJWT = Depends()):
    &#34;&#34;&#34;
    Endpoint called from template from body_device_license.html template. Connects body device with license
    and redirects to body-devices-web endpoint
    &#34;&#34;&#34;
    Authorize.jwt_optional()
    current_user = Authorize.get_jwt_subject()
    if current_user != &#34;admin&#34;:
        return RedirectResponse(url=f&#34;/logs-web&#34;, status_code=303)
    crud.update_bodydevice_license(db, device_id, int(lic))
    return RedirectResponse(url=f&#34;/body-devices-web&#34;, status_code=303)


@body_device_web.post(&#34;/body-devices-web-team/{device_id}&#34;)
async def delete_post(device_id: int, team_con: str = Form(...), db: Session = Depends(get_db),
                      Authorize: AuthJWT = Depends()):
    &#34;&#34;&#34;
    Endpoint called from template from body_device_license.html template, connects device with new team
    and redirects to body-devices-web endpoint
    &#34;&#34;&#34;
    Authorize.jwt_optional()
    current_user = Authorize.get_jwt_subject()
    if current_user != &#34;admin&#34;:
        return RedirectResponse(url=f&#34;/logs-web&#34;, status_code=303)
    crud.update_bodydevice_team(db, device_id, int(team_con))
    return RedirectResponse(url=f&#34;/body-devices-web&#34;, status_code=303)


@body_device_web.post(&#34;/body-devices-inv/{device_id}&#34;)
async def device_inv(device_id: int, dev_inv: str = Form(...), db: Session = Depends(get_db),
                     Authorize: AuthJWT = Depends()):
    &#34;&#34;&#34;
    Endpoint called from template from body_device_license.html template, updates devices inventory number
    and redirects to body-devices-web endpoint
    &#34;&#34;&#34;
    Authorize.jwt_optional()
    current_user = Authorize.get_jwt_subject()
    if current_user != &#34;admin&#34;:
        return RedirectResponse(url=f&#34;/logs-web&#34;, status_code=303)
    crud.update_bodydevice_inv(db, device_id, dev_inv)
    return RedirectResponse(url=f&#34;/body-devices-web&#34;, status_code=303)


@body_device_web.post(&#34;/body-devices-comm/{device_id}&#34;)
async def device_inv(device_id: int, dev_com: str = Form(...), db: Session = Depends(get_db),
                     Authorize: AuthJWT = Depends()):
    &#34;&#34;&#34;
    Endpoint called from template from body_device_license.html template, updates devices comment
    and redirects to body-devices-web endpoint
    &#34;&#34;&#34;
    Authorize.jwt_optional()
    current_user = Authorize.get_jwt_subject()
    if current_user != &#34;admin&#34;:
        return RedirectResponse(url=f&#34;/logs-web&#34;, status_code=303)
    crud.update_bodydevice_comm(db, device_id, dev_com)
    return RedirectResponse(url=f&#34;/body-devices-web&#34;, status_code=303)</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="sql_app.api.bodydevices_web.connect_dev_lic"><code class="name flex">
<span>async def <span class="ident">connect_dev_lic</span></span>(<span>request: starlette.requests.Request, device_id: int, db: sqlalchemy.orm.session.Session = Depends(get_db), Authorize: fastapi_jwt_auth.auth_jwt.AuthJWT = Depends(NoneType))</span>
</code></dt>
<dd>
<div class="desc"><p>Returns template with one body device and all available licenses that can be assigned to it. Plus available teams
that can be assigned to device, inventory number and comment text input for this device.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@body_device_web.get(&#34;/body-device-license/{device_id}&#34;, response_class=HTMLResponse)
async def connect_dev_lic(request: Request, device_id: int, db: Session = Depends(get_db),
                          Authorize: AuthJWT = Depends()):
    &#34;&#34;&#34;
    Returns template with one body device and all available licenses that can be assigned to it. Plus available teams
    that can be assigned to device, inventory number and comment text input for this device.
    &#34;&#34;&#34;
    Authorize.jwt_optional()
    current_user = Authorize.get_jwt_subject()
    if current_user != &#34;admin&#34;:
        return RedirectResponse(url=f&#34;/logs-web&#34;, status_code=303)
    device = crud.get_body_device(db, device_id)
    licenses = crud.get_licenses(db, 0, 100)
    lic_left = []
    for lic in licenses:
        if lic != device.license:
            lic_left.append(lic)
    teams = crud.get_teams(db, 0, 100)
    return templates.TemplateResponse(&#34;body_device_license.html&#34;,
                                      {&#34;request&#34;: request, &#34;device&#34;: device, &#34;licenses&#34;: lic_left, &#34;teams&#34;: teams})</code></pre>
</details>
</dd>
<dt id="sql_app.api.bodydevices_web.connect_post"><code class="name flex">
<span>async def <span class="ident">connect_post</span></span>(<span>device_id: int, lic: str = Form(Ellipsis), db: sqlalchemy.orm.session.Session = Depends(get_db), Authorize: fastapi_jwt_auth.auth_jwt.AuthJWT = Depends(NoneType))</span>
</code></dt>
<dd>
<div class="desc"><p>Endpoint called from template from body_device_license.html template. Connects body device with license
and redirects to body-devices-web endpoint</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@body_device_web.post(&#34;/body-devices-web-lic/{device_id}&#34;)
async def connect_post(device_id: int, lic: str = Form(...), db: Session = Depends(get_db),
                       Authorize: AuthJWT = Depends()):
    &#34;&#34;&#34;
    Endpoint called from template from body_device_license.html template. Connects body device with license
    and redirects to body-devices-web endpoint
    &#34;&#34;&#34;
    Authorize.jwt_optional()
    current_user = Authorize.get_jwt_subject()
    if current_user != &#34;admin&#34;:
        return RedirectResponse(url=f&#34;/logs-web&#34;, status_code=303)
    crud.update_bodydevice_license(db, device_id, int(lic))
    return RedirectResponse(url=f&#34;/body-devices-web&#34;, status_code=303)</code></pre>
</details>
</dd>
<dt id="sql_app.api.bodydevices_web.delete_post"><code class="name flex">
<span>async def <span class="ident">delete_post</span></span>(<span>device_id: int, team_con: str = Form(Ellipsis), db: sqlalchemy.orm.session.Session = Depends(get_db), Authorize: fastapi_jwt_auth.auth_jwt.AuthJWT = Depends(NoneType))</span>
</code></dt>
<dd>
<div class="desc"><p>Endpoint called from template from body_device_license.html template, connects device with new team
and redirects to body-devices-web endpoint</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@body_device_web.post(&#34;/body-devices-web-team/{device_id}&#34;)
async def delete_post(device_id: int, team_con: str = Form(...), db: Session = Depends(get_db),
                      Authorize: AuthJWT = Depends()):
    &#34;&#34;&#34;
    Endpoint called from template from body_device_license.html template, connects device with new team
    and redirects to body-devices-web endpoint
    &#34;&#34;&#34;
    Authorize.jwt_optional()
    current_user = Authorize.get_jwt_subject()
    if current_user != &#34;admin&#34;:
        return RedirectResponse(url=f&#34;/logs-web&#34;, status_code=303)
    crud.update_bodydevice_team(db, device_id, int(team_con))
    return RedirectResponse(url=f&#34;/body-devices-web&#34;, status_code=303)</code></pre>
</details>
</dd>
<dt id="sql_app.api.bodydevices_web.device_inv"><code class="name flex">
<span>async def <span class="ident">device_inv</span></span>(<span>device_id: int, dev_com: str = Form(Ellipsis), db: sqlalchemy.orm.session.Session = Depends(get_db), Authorize: fastapi_jwt_auth.auth_jwt.AuthJWT = Depends(NoneType))</span>
</code></dt>
<dd>
<div class="desc"><p>Endpoint called from template from body_device_license.html template, updates devices comment
and redirects to body-devices-web endpoint</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@body_device_web.post(&#34;/body-devices-comm/{device_id}&#34;)
async def device_inv(device_id: int, dev_com: str = Form(...), db: Session = Depends(get_db),
                     Authorize: AuthJWT = Depends()):
    &#34;&#34;&#34;
    Endpoint called from template from body_device_license.html template, updates devices comment
    and redirects to body-devices-web endpoint
    &#34;&#34;&#34;
    Authorize.jwt_optional()
    current_user = Authorize.get_jwt_subject()
    if current_user != &#34;admin&#34;:
        return RedirectResponse(url=f&#34;/logs-web&#34;, status_code=303)
    crud.update_bodydevice_comm(db, device_id, dev_com)
    return RedirectResponse(url=f&#34;/body-devices-web&#34;, status_code=303)</code></pre>
</details>
</dd>
<dt id="sql_app.api.bodydevices_web.filter_devices"><code class="name flex">
<span>async def <span class="ident">filter_devices</span></span>(<span>request: starlette.requests.Request, skip: int = 0, limit: int = 100, body_id: str = Form(all), lic_id: str = Form(all), team: str = Form(all), db: sqlalchemy.orm.session.Session = Depends(get_db), Authorize: fastapi_jwt_auth.auth_jwt.AuthJWT = Depends(NoneType))</span>
</code></dt>
<dd>
<div class="desc"><p>Endpoint used for filtering body devices by user given inputs. returns html template with only
body devices that has attributes defined by user input</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@body_device_web.post(&#34;/body-devices-web&#34;, response_class=HTMLResponse)
async def filter_devices(request: Request, skip: int = 0, limit: int = 100,
                         body_id: str = Form(&#34;all&#34;), lic_id: str = Form(&#34;all&#34;), team: str = Form(&#34;all&#34;),
                         db: Session = Depends(get_db), Authorize: AuthJWT = Depends()):
    &#34;&#34;&#34;
    Endpoint used for filtering body devices by user given inputs. returns html template with only
    body devices that has attributes defined by user input
    &#34;&#34;&#34;
    Authorize.jwt_optional()
    current_user = Authorize.get_jwt_subject()
    device_dict = []
    devices_f = crud.get_filtered_bodydevices(db, body_id, lic_id, team)
    ids = []
    for d in devices_f:
        ids.append(d[0])
    devices = crud.get_bodydevices_with_ids(db, ids)
    teams = crud.get_teams(db, skip=skip, limit=limit)
    for dev in devices:
        lic = crud.get_license(db, dev.license_id)
        device_dict.append({&#34;device&#34;: dev, &#34;license&#34;: lic, &#34;log&#34;: dev.b_logs[len(dev.b_logs) - 1]})
    licenses = crud.get_licenses(db, skip=skip, limit=limit)
    if current_user == &#34;admin&#34;:
        return templates.TemplateResponse(&#34;body_devices.html&#34;, {&#34;request&#34;: request, &#34;devices&#34;: device_dict,
                                                                &#34;devs&#34;: devices, &#34;teams&#34;: teams, &#34;licenses&#34;: licenses,
                                                                &#34;user&#34;: current_user})
    else:
        current_user = &#34;guest&#34;
        return templates.TemplateResponse(&#34;body_devices_normal.html&#34;, {&#34;request&#34;: request, &#34;devices&#34;: device_dict,
                                                                       &#34;devs&#34;: devices, &#34;teams&#34;: teams,
                                                                       &#34;licenses&#34;: licenses,
                                                                       &#34;user&#34;: current_user})</code></pre>
</details>
</dd>
<dt id="sql_app.api.bodydevices_web.get_db"><code class="name flex">
<span>def <span class="ident">get_db</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_db():
    db = SessionLocal()
    try:
        yield db
    finally:
        db.close()</code></pre>
</details>
</dd>
<dt id="sql_app.api.bodydevices_web.read_devices"><code class="name flex">
<span>async def <span class="ident">read_devices</span></span>(<span>request: starlette.requests.Request, skip: int = 0, limit: int = 100, db: sqlalchemy.orm.session.Session = Depends(get_db), Authorize: fastapi_jwt_auth.auth_jwt.AuthJWT = Depends(NoneType))</span>
</code></dt>
<dd>
<div class="desc"><p>Returns template with all body devices and necessary attributes</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@body_device_web.get(&#34;/body-devices-web&#34;, response_class=HTMLResponse)
async def read_devices(request: Request, skip: int = 0, limit: int = 100, db: Session = Depends(get_db),
                       Authorize: AuthJWT = Depends()):
    &#34;&#34;&#34;
    Returns template with all body devices and necessary attributes
    &#34;&#34;&#34;
    Authorize.jwt_optional()
    current_user = Authorize.get_jwt_subject()

    device_dict = []
    devices = crud.get_body_devices(db, skip=skip, limit=limit)
    teams = crud.get_teams(db, skip=skip, limit=limit)
    for dev in devices:
        lic = crud.get_license(db, dev.license_id)
        device_dict.append({&#34;device&#34;: dev, &#34;license&#34;: lic, &#34;log&#34;: dev.b_logs[len(dev.b_logs) - 1]})
    licenses = crud.get_licenses(db, skip=skip, limit=limit)
    if current_user == &#34;admin&#34;:
        return templates.TemplateResponse(&#34;body_devices.html&#34;, {&#34;request&#34;: request, &#34;devices&#34;: device_dict,
                                                                &#34;devs&#34;: devices, &#34;teams&#34;: teams, &#34;licenses&#34;: licenses,
                                                                &#34;user&#34;: current_user})
    else:
        current_user = &#34;guest&#34;
        return templates.TemplateResponse(&#34;body_devices_normal.html&#34;, {&#34;request&#34;: request, &#34;devices&#34;: device_dict,
                                                                &#34;devs&#34;: devices, &#34;teams&#34;: teams, &#34;licenses&#34;: licenses,
                                                                &#34;user&#34;: current_user})</code></pre>
</details>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="sql_app.api" href="index.html">sql_app.api</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="two-column">
<li><code><a title="sql_app.api.bodydevices_web.connect_dev_lic" href="#sql_app.api.bodydevices_web.connect_dev_lic">connect_dev_lic</a></code></li>
<li><code><a title="sql_app.api.bodydevices_web.connect_post" href="#sql_app.api.bodydevices_web.connect_post">connect_post</a></code></li>
<li><code><a title="sql_app.api.bodydevices_web.delete_post" href="#sql_app.api.bodydevices_web.delete_post">delete_post</a></code></li>
<li><code><a title="sql_app.api.bodydevices_web.device_inv" href="#sql_app.api.bodydevices_web.device_inv">device_inv</a></code></li>
<li><code><a title="sql_app.api.bodydevices_web.filter_devices" href="#sql_app.api.bodydevices_web.filter_devices">filter_devices</a></code></li>
<li><code><a title="sql_app.api.bodydevices_web.get_db" href="#sql_app.api.bodydevices_web.get_db">get_db</a></code></li>
<li><code><a title="sql_app.api.bodydevices_web.read_devices" href="#sql_app.api.bodydevices_web.read_devices">read_devices</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>